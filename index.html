<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡∏£‡∏±‡∏Å‡∏ô‡∏∞‡πÑ‡∏≠‡πâ‡∏ï‡∏±‡∏ß‡πÅ‡∏™‡∏ö ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Mali:wght@400;700&family=Sriracha&display=swap" rel="stylesheet">
    <style>
        /* --- 1. CORE THEME --- */
        :root { --primary: #ff4757; --secondary: #ff6b81; --accent: #ffd700; --bg-gradient: radial-gradient(circle at center, #fff0f5 0%, #ffcdd2 50%, #ff9a9e 100%); }
        body, html { margin: 0; padding: 0; height: 100%; font-family: 'Mali', cursive; overflow: hidden; background: var(--bg-gradient); background-size: 400% 400%; animation: gradientBG 15s ease infinite; color: #444; user-select: none; }
        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        #particles-js { position: absolute; width: 100%; height: 100%; z-index: 0; }

        /* --- 2. UI ELEMENTS --- */
        .music-disk { position: absolute; top: 20px; right: 20px; width: 50px; height: 50px; background: conic-gradient(#333 0%, #555 25%, #333 50%, #555 75%, #333 100%); border-radius: 50%; border: 3px solid white; box-shadow: 0 0 15px rgba(255,71,87,0.5); z-index: 50; display: flex; justify-content: center; align-items: center; cursor: pointer; animation: spin 2s linear infinite; animation-play-state: paused; }
        .music-disk::after { content: 'üéµ'; font-size: 20px; }
        .music-disk.playing { animation-play-state: running; box-shadow: 0 0 25px rgba(255,71,87,0.8); border-color: var(--accent); }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        .progress-container { position: absolute; top: 0; left: 0; width: 100%; height: 6px; background: rgba(255,255,255,0.3); z-index: 100; }
        .progress-bar { height: 100%; width: 0%; background: linear-gradient(90deg, var(--primary), var(--accent), var(--secondary)); transition: width 0.5s ease; box-shadow: 0 0 10px var(--primary); }

        /* --- 3. SCREENS --- */
        #app { position: relative; z-index: 10; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .screen { position: absolute; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: all 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55); }
        .hidden { opacity: 0; pointer-events: none; transform: scale(1.1); filter: blur(5px); }
        .active { opacity: 1; pointer-events: auto; transform: scale(1); filter: blur(0); }

        /* Intro */
        .intro-title { font-family: 'Dancing Script', cursive; font-size: 60px; color: var(--primary); text-shadow: 3px 3px 0 white; margin-bottom: 20px; text-align: center; padding: 0 10px; }
        .btn-pulse { background: white; color: var(--primary); border: 4px solid var(--primary); padding: 15px 50px; border-radius: 50px; font-size: 22px; font-weight: bold; font-family: 'Sriracha'; cursor: pointer; box-shadow: 0 10px 30px rgba(255, 71, 87, 0.4); animation: pulseBtn 1.5s infinite; transition: all 0.3s; }
        @keyframes pulseBtn { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* Story Card (Fixed Mobile Crop & Color Effect) */
        .card-container { width: 95%; max-width: 420px; }
        .polaroid { 
            background: white; padding: 12px; border-radius: 15px; 
            box-shadow: 0 20px 50px rgba(0,0,0,0.2); 
            border: 2px solid rgba(255,255,255,0.8);
            position: relative;
            transform: rotate(-2deg); /* ‡πÄ‡∏≠‡∏µ‡∏¢‡∏á‡∏ô‡∏¥‡∏î‡πÜ ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏´‡∏°‡∏∏‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏°‡∏≤‡∏™‡πå */
        }
        /* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏™‡∏µ‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡πÅ‡∏™‡∏á (Glow) ‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏Ñ‡∏£‡∏ö */
        .polaroid::before { content:''; position: absolute; inset: -5px; background: linear-gradient(45deg, var(--primary), var(--accent), var(--secondary)); z-index: -1; filter: blur(20px); opacity: 0.4; border-radius: 25px; animation: glow 3s infinite alternate; }
        @keyframes glow { from { opacity: 0.3; } to { opacity: 0.6; } }

        .img-box { 
            width: 100%; 
            background: #f0f0f0; 
            border-radius: 10px; 
            overflow: hidden; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            /* Fix Mobile: ‡πÑ‡∏°‡πà‡∏ü‡∏¥‡∏Å‡∏ã‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏ï‡∏≤‡∏¢‡∏ï‡∏±‡∏ß ‡πÅ‡∏ï‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÑ‡∏ß‡πâ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏•‡πâ‡∏ô */
            min-height: 250px; 
        }
        .polaroid img { 
            width: 100%; 
            height: auto; 
            max-height: 50vh; /* ‡∏£‡∏π‡∏õ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏π‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏à‡∏≠‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå */
            object-fit: contain; /* ‡πÇ‡∏ä‡∏ß‡πå‡∏£‡∏π‡∏õ‡πÄ‡∏ï‡πá‡∏°‡πÉ‡∏ö‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô 100% */
            display: block; 
        }
        .caption-box { padding: 20px 10px; text-align: center; color: #444; font-size: 18px; font-weight: 700; line-height: 1.6; white-space: pre-line; font-family: 'Sriracha', cursive; }
        
        .btn-next { margin-top: 20px; background: linear-gradient(45deg, var(--primary), var(--secondary)); color: white; border: none; padding: 12px 40px; border-radius: 50px; font-size: 20px; cursor: pointer; box-shadow: 0 10px 20px rgba(255, 71, 87, 0.4); font-family: 'Sriracha'; }
        .btn-next:active { transform: scale(0.95); }

        /* Ending */
        .end-box { background: rgba(255,255,255,0.95); padding: 40px 20px; border-radius: 30px; text-align: center; max-width: 90%; box-shadow: 0 20px 50px rgba(0,0,0,0.2); position: relative; overflow: hidden; }
        
        .shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake { 10%, 90% { transform: translate3d(-2px, 0, 0); } 20%, 80% { transform: translate3d(4px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-6px, 0, 0); } 40%, 60% { transform: translate3d(6px, 0, 0); } }

        @media (max-width: 600px) { .intro-title { font-size: 45px; } .caption-box { font-size: 16px; } }
    </style>
</head>
<body>
    
    <audio id="bg-music" loop>
        <source src="song.mp3" type="audio/mpeg">
    </audio>

    <div class="progress-container"><div class="progress-bar" id="p-bar"></div></div>
    <div class="music-disk" id="music-btn" title="Music On" onclick="toggleMusic()"></div>
    <div id="particles-js"></div>

    <div id="app">
        <div class="screen active" id="s-intro">
            <div class="intro-title">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏Å‡∏±‡∏ö‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏≠ ‚ù§Ô∏è</div>
            <div style="font-size: 80px; margin-bottom: 20px; animation: bounce 2s infinite;">üìñüå∂Ô∏è</div>
            <button class="btn-pulse" id="btn-start" onclick="startExperience()">‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡∏ï‡πä‡∏∞! (‡∏´‡πâ‡∏≤‡∏°‡∏ö‡πà‡∏ô)</button>
        </div>

        <div class="screen hidden" id="s-story">
            <div class="card-container">
                <div class="polaroid">
                    <div class="img-box"><img id="story-img" src="1.png" alt="Memory"></div>
                    <div class="caption-box" id="story-text">...</div>
                </div>
            </div>
            <button class="btn-next" onclick="nextSlide()">‡πÑ‡∏õ‡∏ï‡πà‡∏≠‡πÄ‡∏•‡∏¢‡∏ô‡∏¥ ‚ù§Ô∏è</button>
        </div>

        <div class="screen hidden" id="s-end">
            <div class="end-box">
                <h1 style="font-family: 'Dancing Script'; font-size: 50px; color: #ff4757; margin: 0;">Happy Birthday! üéÇ</h1>
                <p id="final-msg" style="font-family: 'Sriracha'; font-size: 20px; margin: 20px 0; line-height: 1.6; font-weight: bold; color: #333;"></p>
                <button class="btn-pulse" style="font-size: 18px; padding: 10px 30px;" onclick="location.reload()">‡πÅ‡∏•‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ ‚Ü∫</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // --- DATA ---
        const stories = [
            { img: "1.png", txt: "‡∏à‡∏≥‡πÑ‡∏î‡πâ‡∏°‡πà‡∏≤‡∏¢‡∏ô‡∏¥ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏õ‡∏ô‡∏±‡πà‡∏á‡πÅ‡∏•‡∏õ‡πà‡∏≤‡πÅ‡∏•‡πÄ‡∏Ç‡∏≤‡∏Å‡∏±‡∏ô üèûÔ∏è\n‡πÅ‡∏Ñ‡πà‡∏°‡∏µ‡πÄ‡∏ò‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡πÜ ‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏£‡πâ‡∏≠‡∏ô‡πÜ...\n‡∏Å‡∏∞‡πÄ‡∏¢‡πá‡∏ô‡∏™‡∏ö‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏•‡∏¢‡∏ô‡∏¥ (‡∏´‡∏¢‡∏≠‡∏Å‡πÜ) ‡∏£‡∏±‡∏Å‡∏Ñ‡πâ‡∏≤‡∏≤ ‚ù§Ô∏è" },
            { img: "2.png", txt: "‡∏´‡∏ß‡∏≤‡∏á‡πÑ‡∏õ‡πÑ‡∏≠‡πâ‡πÑ‡∏´‡∏£‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏ô‡∏¥ ‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≠‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏õ‡∏•‡∏≤‡∏ó‡∏π‡πÅ‡∏°‡πà‡∏Å‡∏•‡∏≠‡∏á‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏¢ üêü\n‡πÅ‡∏ï‡πà‡∏û‡∏≠‡πÑ‡∏î‡πâ‡∏Å‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏´‡∏£‡∏≠‡∏¢‡πÜ ‡πÅ‡∏•‡πâ‡∏ß‡∏¢‡∏¥‡πâ‡∏°‡πÅ‡∏â‡πà‡∏á‡πÄ‡∏•‡∏¢‡∏ô‡∏∞\n‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏ô‡πà‡∏≤‡∏ï‡∏µ ‡∏ô‡∏¥‡∏Ñ‡πâ‡∏≤‡∏≤ ü§£" },
            { img: "3.png", txt: "‡∏Ñ‡∏∑‡∏ô‡∏•‡∏≠‡∏¢‡∏Å‡∏£‡∏∞‡∏ó‡∏á ‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏≠‡∏ò‡∏¥‡∏©‡∏ê‡∏≤‡∏ô‡πÑ‡∏≠‡πâ‡πÑ‡∏´‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏ô‡∏≤‡∏ô‡∏™‡∏≠‡∏á‡∏ô‡∏≤‡∏ô üåï\n‡πÅ‡∏ï‡πà‡πÄ‡∏Ñ‡πâ‡∏≤‡∏≠‡∏ò‡∏¥‡∏©‡∏ê‡∏≤‡∏ô‡∏ß‡πà‡∏≤ '‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏ó‡∏≠ ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏Å‡∏ß‡∏ô‡∏ï‡∏µ‡∏ô‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢' ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞‡∏Ñ‡πâ‡∏≤‡∏≤ üôè" },
            { img: "4.png", txt: "‡πÅ‡∏•‡∏ï‡πä‡∏∞ ‡∏ô‡∏≠‡∏ô‡∏û‡∏∏‡∏á‡∏õ‡∏•‡∏¥‡πâ‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÉ‡∏Ñ‡∏£‡πÄ‡∏ó‡∏≠‡∏ß‡πà‡∏≤? üê±\n‡πÄ‡∏´‡πá‡∏ô‡πÅ‡∏°‡∏ß‡∏ô‡∏≠‡∏ô‡∏ö‡∏≤‡∏¢‡πÉ‡∏à‡∏û‡∏±‡∏ô‡∏ô‡∏µ‡πâ ‡∏Å‡πá‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏ó‡∏≠‡∏ô‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏≠‡∏ô‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á\n‡∏°‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠ sofa ‡πÄ‡∏≠‡πâ‡∏¢Safe Zone ‡∏ó‡∏µ‡πà‡∏ö‡∏≤‡∏¢‡πÉ‡∏à‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏¥‡∏Ñ‡πâ‡∏≤‡∏≤ ü•∞" },
            { img: "5.png", txt: "‡∏Ç‡∏≠‡∏ö‡πÉ‡∏à‡∏ô‡∏∞‡∏ó‡∏µ‡πà‡∏Ñ‡∏≠‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏ß‡∏î‡∏´‡∏±‡∏ß‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡πÉ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ü§™\n‡∏´‡∏¢‡∏≠‡∏Å‡πÜ ‡∏£‡∏±‡∏Å‡∏ô‡∏∞‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡πÅ‡∏ö‡∏£‡πà ‡∏î‡∏π‡πÅ‡∏•‡∏Å‡∏±‡∏ô‡∏û‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ï‡∏•‡∏≠‡∏î‡πÑ‡∏õ‡∏ô‡∏∞‡∏Ñ‡πâ‡∏≤‡∏≤ üíï" },
            { img: "6.png", txt: "‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏¥ ‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏µ‡∏ô‡∏µ‡πâ ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏ò‡∏≠‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏°‡∏≤‡∏Å‡πÜ üéâ\n‡∏≠‡∏¢‡πà‡∏≤‡∏ö‡πà‡∏ô‡πÉ‡∏´‡πâ‡∏°‡∏≤‡∏Å‡πÅ‡∏£‡∏á ‡∏Å‡∏¥‡∏ô‡∏ô‡πâ‡∏≠‡∏¢‡πÜ ‡∏´‡∏¥‡∏î‡∏ï‡∏∞‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏≠‡πâ‡∏ß‡∏ô‡πÅ‡∏•‡πâ‡∏ß (‡∏´‡∏•‡∏≠‡∏Å‡πÜ)\n‡∏£‡∏±‡∏Å‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ö‡πÄ‡∏ò‡∏≠‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡πÇ‡∏•‡∏Å‡πÄ‡∏•‡∏¢‡∏ô‡∏∞‡∏Ñ‡πâ‡∏≤‡∏≤ üéÇ‚ú®" }
        ];
        const endMsg = "‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏ô‡∏∞ \"‡πÑ‡∏≠‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å\" üéÇ\n‡πÅ‡∏Å‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏µ‡∏Å‡∏õ‡∏µ‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞‡∏ô‡∏¥ ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏°‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏Å‡∏ß‡∏ô‡∏ï‡∏µ‡∏ô‡∏ô‡πà‡∏∞\n‡πÄ‡∏ò‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏≤‡∏ï‡∏≤‡∏á‡∏°‡∏≤‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏û‡∏∏‡∏á‡πÅ‡∏ï‡∏Å‡πÑ‡∏õ‡πÄ‡∏•‡∏¢\n‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ô‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏î‡πâ‡∏≠‡∏à‡πâ‡∏≤‡∏≤ ‡∏£‡∏±‡∏Å‡πÄ‡∏ò‡∏≠‡∏´‡∏°‡∏î‡πÉ‡∏à‡πÄ‡∏•‡∏¢‡∏ô‡∏¥‡∏Ñ‡πâ‡∏≤‡∏≤ ‚ù§Ô∏èüå∂Ô∏è‚ú®";
        
        let curIdx = 0;
        const audio = document.getElementById('bg-music');
        const musicBtn = document.getElementById('music-btn');
        const startBtn = document.getElementById('btn-start');

        // --- MAIN LOGIC ---
        function startExperience() {
            // 1. ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
            startBtn.innerHTML = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å... ‚ù§Ô∏è";
            startBtn.style.animation = "pulseBtn 0.2s infinite"; 

            // 2. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á (Volume 0)
            audio.volume = 0;
            audio.play().then(() => {
                musicBtn.classList.add('playing');
                // 3. ‡∏Ñ‡πà‡∏≠‡∏¢‡πÜ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏á (Fade In) ‡πÉ‡∏ô 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
                let vol = 0;
                let fadeInterval = setInterval(() => {
                    if (vol < 0.5) {
                        vol += 0.02; 
                        audio.volume = Math.min(vol, 0.5);
                    } else {
                        clearInterval(fadeInterval);
                    }
                }, 100); // 100ms * 30 steps = 3000ms
            }).catch(e => console.log("Audio Error"));

            // 4. ‡∏£‡∏≠ 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤
            setTimeout(() => {
                nextScreen('s-story');
            }, 3000);
        }

        function toggleMusic() {
            if (audio.paused) {
                audio.play();
                musicBtn.classList.add('playing');
            } else {
                audio.pause();
                musicBtn.classList.remove('playing');
            }
        }

        // --- SLIDE LOGIC ---
        function updateProgress() { document.getElementById('p-bar').style.width = ((curIdx+1)/stories.length)*100 + '%'; }
        
        function loadSlide() {
            const img = document.getElementById('story-img'); const txt = document.getElementById('story-text');
            const card = document.querySelector('.polaroid');
            card.style.opacity='0'; card.style.transform='rotate(-5deg) scale(0.9)';
            setTimeout(()=>{
                img.src=stories[curIdx].img; txt.innerText=stories[curIdx].txt;
                // ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡∏ô‡∏¥‡πà‡∏á‡πÜ ‡πÑ‡∏°‡πà‡∏´‡∏°‡∏∏‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏°‡∏≤‡∏™‡πå
                card.style.opacity='1'; card.style.transform='rotate(-2deg) scale(1)'; updateProgress();
            },300);
        }

        function nextScreen(id) {
            document.getElementById('app').classList.add('shake'); setTimeout(()=>document.getElementById('app').classList.remove('shake'),500);
            document.querySelectorAll('.screen').forEach(s=>{s.classList.remove('active');s.classList.add('hidden');});
            document.getElementById(id).classList.remove('hidden'); document.getElementById(id).classList.add('active');
            if(id==='s-story') loadSlide();
        }

        function nextSlide() {
            document.getElementById('app').classList.add('shake'); setTimeout(()=>document.getElementById('app').classList.remove('shake'),500);
            if(curIdx<stories.length-1) { curIdx++; loadSlide(); } else { nextScreen('s-end'); startTyping(endMsg); fireFireworks(); }
        }

        function startTyping(txt) {
            const el = document.getElementById('final-msg'); el.innerHTML=""; let i=0;
            function type() { if(i<txt.length) { el.innerHTML+=txt.charAt(i); i++; setTimeout(type,50); } } setTimeout(type,500);
        }

        function fireFireworks() {
            const duration=5000; const end=Date.now()+duration;
            (function frame() {
                confetti({ particleCount: 15, angle: 60, spread: 80, origin: { x: 0, y: 0.7 }, colors:['#ff4757','#ffd700'] });
                confetti({ particleCount: 15, angle: 120, spread: 80, origin: { x: 1, y: 0.7 }, colors:['#ff4757','#ffd700'] });
                if(Date.now()<end) requestAnimationFrame(frame);
            }());
        }

        // --- PARTICLES ---
        particlesJS("particles-js", {"particles":{"number":{"value":50,"density":{"enable":true,"value_area":800}},"color":{"value":["#ff4757","#ffd700","#ffffff"]},"shape":{"type":"heart"},"opacity":{"value":0.5,"random":true},"size":{"value":10,"random":true},"line_linked":{"enable":false},"move":{"enable":true,"speed":2,"direction":"top","random":true,"straight":false,"out_mode":"out"}},"interactivity":{"detect_on":"canvas","events":{"onhover":{"enable":true,"mode":"bubble"},"onclick":{"enable":true,"mode":"repulse"}},"modes":{"bubble":{"distance":200,"size":15,"duration":2,"opacity":0.8},"repulse":{"distance":200,"duration":0.4}}}});

        const style = document.createElement('style'); style.innerHTML = `@keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }`; document.head.appendChild(style);
    </script>
</body>
</html>
