<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Our Love Story ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Mali:wght@400;700&family=Sriracha&display=swap" rel="stylesheet">
    <style>
        /* --- CSS Setup --- */
        :root {
            --primary: #ff6b81;
            --secondary: #ff4757;
            --bg-gradient: linear-gradient(180deg, #ffe6ee 0%, #ffcdd2 100%);
            --text-color: #4a2c2c;
        }

        body, html {
            margin: 0; padding: 0; height: 100%;
            font-family: 'Mali', cursive; overflow: hidden;
            background: var(--bg-gradient); color: var(--text-color);
        }

        /* --- Background Effects --- */
        .bokeh-container { position: absolute; width: 100%; height: 100%; top:0; left:0; overflow: hidden; z-index: 0; pointer-events: none; }
        .bokeh {
            position: absolute; border-radius: 50%; animation: moveBokeh 20s infinite linear;
            background: rgba(255, 255, 255, 0.3); box-shadow: 0 0 20px rgba(255, 230, 240, 0.5); filter: blur(5px);
        }
        @keyframes moveBokeh {
            0% { transform: translate(0, 0) rotate(0deg); opacity: 0; }
            50% { opacity: 0.6; }
            100% { transform: translate(var(--x), var(--y)) rotate(360deg); opacity: 0; }
        }
        .bg-hearts { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        .heart-bg {
            position: absolute; color: rgba(255, 107, 129, 0.3); font-size: 20px;
            animation: floatUp 15s linear infinite; bottom: -50px;
        }
        @keyframes floatUp { 
            0% { transform: translateY(0) rotate(0deg); opacity: 0; } 100% { transform: translateY(-1000px) rotate(360deg); opacity: 0; }
        }

        /* --- Container --- */
        #app-container {
            position: relative; z-index: 10; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }

        /* --- 1. Intro --- */
        #intro-screen { text-align: center; transition: opacity 0.8s; width: 100%; }
        .title-start {
            font-family: 'Dancing Script', cursive; font-size: 50px; color: var(--secondary);
            text-shadow: 3px 3px 0px rgba(255,255,255,0.8); margin-bottom: 20px; animation: pulse 2s infinite;
        }
        .btn-start {
            background: white; color: var(--primary); border: 3px solid var(--primary);
            padding: 12px 40px; border-radius: 50px; font-size: 20px; font-family: 'Sriracha', cursive;
            cursor: pointer; box-shadow: 0 10px 25px rgba(255, 107, 129, 0.4); transition: all 0.3s;
        }
        .btn-start:hover { transform: scale(1.05); }

        /* --- 2. Story Card (Flexible Image) --- */
        #story-screen {
            display: none; flex-direction: column; align-items: center; 
            width: 90%; max-width: 420px; height: auto; max-height: 90vh; /* ‡∏Å‡∏±‡∏ô‡∏ó‡∏∞‡∏•‡∏∏‡∏à‡∏≠ */
            opacity: 0; transition: opacity 0.8s;
        }
        .polaroid {
            background: white; 
            padding: 10px 10px 20px 10px; /* ‡∏Ç‡∏≠‡∏ö‡∏Ç‡∏≤‡∏ß */
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15); 
            width: 100%; margin-bottom: 20px; position: relative;
            display: flex; flex-direction: column; align-items: center;
            transition: all 0.6s cubic-bezier(0.25, 0.8, 0.25, 1); 
            opacity: 0; transform: translateY(50px) scale(0.9);
        }
        .polaroid.show { opacity: 1; transform: translateY(0) scale(1); }

        /* üî• ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡πÉ‡∏´‡πâ‡∏£‡∏π‡∏õ‡πÇ‡∏ä‡∏ß‡πå‡πÄ‡∏ï‡πá‡∏°‡πÉ‡∏ö ‡πÑ‡∏°‡πà‡∏ï‡∏±‡∏î */
        .img-wrapper {
            width: 100%;
            display: flex; justify-content: center; background: #f8f8f8; border-radius: 8px; overflow: hidden;
        }
        .polaroid img { 
            width: 100%; height: auto; /* ‡πÉ‡∏´‡πâ‡∏™‡∏π‡∏á‡∏ï‡∏≤‡∏°‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏à‡∏£‡∏¥‡∏á */
            max-height: 55vh; /* ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ */
            object-fit: contain; /* ‡πÇ‡∏ä‡∏ß‡πå‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏™‡πà‡∏ß‡∏ô */
            display: block; 
        }
        
        .story-text {
            font-size: 18px; color: #444; text-align: center; margin-top: 15px;
            min-height: 60px; display: flex; align-items: center; justify-content: center;
            font-weight: 700; line-height: 1.5; white-space: pre-line; width: 100%;
        }
        .btn-next {
            background: linear-gradient(45deg, var(--primary), var(--secondary)); color: white; border: none;
            padding: 12px 40px; border-radius: 50px; font-size: 18px; cursor: pointer;
            box-shadow: 0 8px 20px rgba(255, 71, 87, 0.5); font-family: 'Mali', cursive; transition: transform 0.2s;
            margin-top: 10px;
        }
        .btn-next:active { transform: scale(0.95); }

        /* --- 3. End Screen --- */
        #end-screen {
            display: none; text-align: center; width: 90%; max-width: 450px;
            background: rgba(255,255,255,0.95); padding: 30px 20px; border-radius: 25px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.15); border: 1px solid rgba(255,255,255,0.5);
            opacity: 0; transform: scale(0.8); transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .hbd-title { font-family: 'Dancing Script', cursive; font-size: 50px; color: var(--secondary); margin: 0; }
        .final-msg { font-size: 18px; line-height: 1.6; margin: 20px 0; color: #444; white-space: pre-wrap; font-weight: 600; }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .blinking-cursor { color: var(--secondary); animation: blink 1s step-end infinite; }
        @keyframes blink { 50% { opacity: 0; } }
        .hidden { display: none !important; } .fade-in { opacity: 1 !important; } .pop-up { opacity: 1 !important; transform: scale(1) !important; }
        
        @media (max-height: 700px) { .title-start { font-size: 40px; } .polaroid img { max-height: 45vh; } }
    </style>
</head>
<body>

    <div class="bokeh-container" id="bokeh-bg"></div>
    <div class="bg-hearts" id="hearts-container"></div>

    <div id="app-container">
        <div id="intro-screen">
            <div class="title-start">The Story of Us ‚ù§Ô∏è</div>
            <div style="font-size: 80px; margin-bottom: 20px; filter: drop-shadow(0 5px 10px rgba(0,0,0,0.1));">üìñ‚ú®</div>
            <button class="btn-start" onclick="startStory()">‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡πà‡∏≤‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</button>
        </div>

        <div id="story-screen">
            <div class="polaroid" id="photo-card">
                <div class="img-wrapper">
                    <img id="story-img" src="1.png" alt="Memory">
                </div>
                <div class="story-text" id="story-caption">...</div>
            </div>
            <button class="btn-next" onclick="nextSlide()" id="btn-next-text">‡πÑ‡∏õ‡∏ï‡πà‡∏≠‡∏Ñ‡πà‡∏∞ ‚ù§Ô∏è</button>
        </div>

        <div id="end-screen">
            <h1 class="hbd-title">Happy Birthday! üéÇ</h1>
            <div class="final-msg" id="final-msg-text"></div>
            <button class="btn-start" onclick="replay()">‡∏≠‡πà‡∏≤‡∏ô‡∏≠‡∏µ‡∏Å‡∏£‡∏≠‡∏ö üíï</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        const storyData = [
            { img: "1.png", text: "‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡πâ‡∏ô‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°? ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ô‡∏±‡πà‡∏á‡∏ä‡∏¥‡∏•‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô\n‡∏ó‡πà‡∏≤‡∏°‡∏Å‡∏•‡∏≤‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥ ‡πÅ‡∏Ñ‡πà‡∏°‡∏µ‡πÄ‡∏ò‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡πÜ\n‡πÇ‡∏•‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡πâ‡∏≤‡∏Å‡πá‡∏™‡∏î‡πÉ‡∏™‡∏Ç‡∏∂‡πâ‡∏ô‡∏ó‡∏±‡∏ô‡∏ï‡∏≤‡πÄ‡∏•‡∏¢ ‚òÄÔ∏è" },
            { img: "2.png", text: "‡∏ñ‡∏∂‡∏á‡∏ö‡∏≤‡∏á‡∏ó‡∏µ‡∏à‡∏∞‡∏ä‡∏≠‡∏ö‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏î‡∏∏‡πÉ‡∏™‡πà‡πÄ‡∏ß‡∏•‡∏≤‡∏´‡∏¥‡∏ß ü§£\n‡πÅ‡∏ï‡πà‡∏£‡∏π‡πâ‡πÑ‡∏´‡∏°‡∏ß‡πà‡∏≤... ‡∏¢‡∏¥‡πà‡∏á‡∏°‡∏≠‡∏á ‡πÄ‡∏Ñ‡πâ‡∏≤‡∏Å‡πá‡∏¢‡∏¥‡πà‡∏á‡∏´‡∏•‡∏á‡∏£‡∏±‡∏Å\n‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡∏°‡∏∑‡πâ‡∏≠‡∏ô‡∏∞ üç≤" },
            { img: "3.png", text: "‡πÉ‡∏ô‡∏Ñ‡∏∑‡∏ô‡∏ß‡∏±‡∏ô‡∏•‡∏≠‡∏¢‡∏Å‡∏£‡∏∞‡∏ó‡∏á...\n‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏´‡∏ô‡∏π‡∏≠‡∏ò‡∏¥‡∏©‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏û‡∏£‡∏≠‡∏∞‡πÑ‡∏£‡∏ô‡∏∞\n‡πÅ‡∏ï‡πà‡∏û‡∏£‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏≠ '‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏ï‡∏•‡∏≠‡∏î‡πÑ‡∏õ' üåï" },
            { img: "4.png", text: "‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏ô‡∏≤‡∏¢‡∏ô‡∏≠‡∏ô‡∏™‡∏ö‡∏≤‡∏¢‡πÉ‡∏à‡∏û‡∏∏‡∏á‡∏û‡∏•‡∏∏‡πâ‡∏¢‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ üê±\n‡∏Å‡πá‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡∏π‡πÄ‡∏•‡∏¢\n‡∏°‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠ Safe Zone ‡∏ó‡∏µ‡πà‡∏≠‡∏ö‡∏≠‡∏∏‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏ö‡∏≤‡∏¢‡πÉ‡∏à‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î" },
            { img: "5.png", text: "‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≠‡∏¢‡∏¢‡∏¥‡πâ‡∏° ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç\n‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≠‡∏¢‡∏î‡∏π‡πÅ‡∏•‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏±‡∏ô‡πÄ‡∏™‡∏°‡∏≠‡∏°‡∏≤‡∏ô‡∏∞\n(‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á‡∏î‡∏π‡πÅ‡∏•‡πÄ‡∏à‡πâ‡∏≤‡πÅ‡∏°‡∏ß‡∏≠‡πâ‡∏ß‡∏ô‡∏û‡∏ß‡∏Å‡∏ô‡∏µ‡πâ‡∏î‡πâ‡∏ß‡∏¢) üíï" },
            { img: "6.png", text: "‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ô‡∏µ‡πâ...\n‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏µ‡∏ô‡∏µ‡πâ ‡πÄ‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏´‡∏ô‡∏π‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏°‡∏≤‡∏Å‡πÜ\n‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏°‡πà‡πÅ‡∏°‡∏ß‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡πâ‡∏≤‡πÑ‡∏õ‡∏ô‡∏≤‡∏ô‡πÜ ‡∏ô‡∏∞!" } 
        ];
        const finalMessage = "‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏ô‡∏∞ '‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏Å' üéÇ\n\n‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏°‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏Ñ‡πâ‡∏≤‡∏£‡∏±‡∏Å‡∏ô‡∏∞\n‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡∏à‡∏∞‡∏î‡∏π‡πÅ‡∏•‡∏´‡∏ô‡∏π\n‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏î‡∏µ‡πÜ ‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô\n\n‡∏£‡∏±‡∏Å‡∏´‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡πÇ‡∏•‡∏Å‡πÄ‡∏•‡∏¢! ‚ù§Ô∏è‚ú®";
        
        let currentIndex = 0;

        function createEffects() {
            const heartCont = document.getElementById('hearts-container');
            const bokehCont = document.getElementById('bokeh-bg');
            for(let i=0; i<12; i++) {
                const heart = document.createElement('div'); heart.innerHTML = i%2==0 ? '‚ù§Ô∏è' : 'üíñ'; heart.className = 'heart-bg';
                heart.style.left = Math.random() * 100 + '%'; heart.style.animationDuration = (Math.random() * 5 + 12) + 's'; heart.style.animationDelay = (Math.random() * 5) + 's'; heartCont.appendChild(heart);
            }
            for(let i=0; i<15; i++) {
                const bokeh = document.createElement('div'); bokeh.className = 'bokeh';
                bokeh.style.width = (Math.random()*10 + 5) + 'vmin'; bokeh.style.height = bokeh.style.width;
                bokeh.style.left = Math.random() * 100 + '%'; bokeh.style.top = Math.random() * 100 + '%';
                bokeh.style.setProperty('--x', (Math.random()*200 - 100) + '%'); bokeh.style.setProperty('--y', (Math.random()*200 - 100) + '%');
                bokeh.style.animationDuration = (Math.random() * 10 + 15) + 's'; bokeh.style.animationDelay = (Math.random() * 5) + 's';
                bokeh.style.backgroundColor = i%3==0 ? 'rgba(255, 255, 255, 0.2)' : i%3==1 ? 'rgba(255, 107, 129, 0.15)' : 'rgba(255, 215, 0, 0.1)'; bokehCont.appendChild(bokeh);
            }
        }
        createEffects();

        function startStory() {
            document.getElementById('intro-screen').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('intro-screen').classList.add('hidden');
                const storyScreen = document.getElementById('story-screen'); storyScreen.style.display = 'flex';
                setTimeout(() => { storyScreen.classList.add('fade-in'); updateSlide(true); }, 50);
            }, 800);
        }

        function updateSlide(isFirst = false) {
            const img = document.getElementById('story-img'); const cap = document.getElementById('story-caption'); const card = document.getElementById('photo-card');
            if(!isFirst) { card.classList.remove('show'); }
            setTimeout(() => {
                img.src = storyData[currentIndex].img; cap.innerText = storyData[currentIndex].text;
                // Random subtle rotation
                const rotate = Math.random() * 4 - 2; 
                card.style.transform = `translateY(50px) scale(0.9) rotate(${rotate}deg)`;
                setTimeout(() => { card.style.transform = `translateY(0) scale(1) rotate(${rotate}deg)`; card.classList.add('show'); }, 50);
            }, isFirst ? 0 : 400);
        }

        function nextSlide() {
            if (currentIndex < storyData.length - 1) { currentIndex++; updateSlide(); } else { showEnding(); }
        }

        function showEnding() {
            document.getElementById('story-screen').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('story-screen').classList.add('hidden');
                const endScreen = document.getElementById('end-screen'); endScreen.style.display = 'block';
                const msgEl = document.getElementById('final-msg-text'); msgEl.innerHTML = ""; 
                setTimeout(() => { endScreen.classList.add('pop-up'); fireConfetti(); typeWriter(finalMessage, msgEl, 40); }, 100);
            }, 800);
        }

        function typeWriter(text, element, speed) {
            let i = 0; element.innerHTML = '<span class="blinking-cursor">|</span>';
            function type() {
                if (i < text.length) { element.innerHTML = text.substring(0, i+1) + '<span class="blinking-cursor">|</span>'; i++; setTimeout(type, speed); }
                else { element.innerHTML = text; }
            } type();
        }

        function fireConfetti() {
            const duration = 3000; const end = Date.now() + duration;
            (function frame() {
                confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0, y: 0.6 }, colors: ['#ff6b81', '#ff4757', '#ffd700'] });
                confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1, y: 0.6 }, colors: ['#ff6b81', '#ff4757', '#ffd700'] });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());
        }
        function replay() { location.reload(); }
    </script>
</body>
</html>
