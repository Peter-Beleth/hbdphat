<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Our Love Story ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Mali:wght@400;700&family=Sriracha&display=swap" rel="stylesheet">
    <style>
        /* --- 1. CORE THEME --- */
        :root {
            --primary: #ff4757;
            --secondary: #ff6b81;
            --accent: #ffd700;
            --bg-gradient: radial-gradient(circle at center, #fff0f5 0%, #ffcdd2 100%);
        }

        body, html {
            margin: 0; padding: 0; height: 100%;
            font-family: 'Mali', cursive; overflow: hidden;
            background: var(--bg-gradient); color: #444;
            user-select: none; /* ‡∏´‡πâ‡∏≤‡∏°‡∏Ñ‡∏•‡∏∏‡∏°‡∏î‡∏≥ */
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="%23ff4757"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>') 12 12, auto;
        }

        /* --- 2. PROGRESS BAR --- */
        .progress-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 6px; background: rgba(255,255,255,0.5); z-index: 100;
        }
        .progress-bar {
            height: 100%; width: 0%; background: linear-gradient(90deg, var(--primary), var(--accent));
            transition: width 0.5s ease; box-shadow: 0 0 10px var(--primary);
        }

        /* --- 3. BACKGROUND EFFECTS --- */
        .bg-hearts { position: absolute; width: 100%; height: 100%; z-index: 0; pointer-events: none; overflow: hidden; }
        .floating-heart {
            position: absolute; font-size: 20px; opacity: 0.6;
            animation: floatUp linear infinite; bottom: -50px;
        }
        @keyframes floatUp { to { transform: translateY(-120vh) rotate(360deg); opacity: 0; } }

        /* Cursor Trail Effect */
        .trail {
            position: absolute; width: 10px; height: 10px; background: var(--primary);
            border-radius: 50%; pointer-events: none; z-index: 999;
            animation: fadeOut 1s forwards;
        }
        @keyframes fadeOut { to { transform: translateY(20px) scale(0); opacity: 0; } }

        /* --- 4. MUSIC DISK (Visual) --- */
        .music-disk {
            position: absolute; top: 20px; right: 20px; width: 50px; height: 50px;
            background: #333; border-radius: 50%; border: 3px solid white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2); z-index: 50;
            display: flex; justify-content: center; align-items: center;
            animation: spin 3s linear infinite; opacity: 0.8;
        }
        .music-disk::after { content: ''; width: 15px; height: 15px; background: var(--primary); border-radius: 50%; }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* --- 5. MAIN CONTAINER --- */
        #app {
            position: relative; z-index: 10; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            perspective: 1000px; /* For 3D Tilt */
        }

        /* --- SCREENS --- */
        .screen {
            position: absolute; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: all 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* Bouncy transition */
        }
        
        .hidden { opacity: 0; pointer-events: none; transform: scale(0.8); }
        .active { opacity: 1; pointer-events: auto; transform: scale(1); }

        /* Intro */
        .intro-title {
            font-family: 'Dancing Script', cursive; font-size: 60px; color: var(--primary);
            text-shadow: 3px 3px 0 white; margin-bottom: 20px;
        }
        .btn-pulse {
            background: white; color: var(--primary); border: 3px solid var(--primary);
            padding: 15px 50px; border-radius: 50px; font-size: 24px; font-weight: bold; font-family: 'Mali';
            cursor: pointer; box-shadow: 0 10px 30px rgba(255, 71, 87, 0.4);
            animation: pulseBtn 1.5s infinite; transition: transform 0.2s;
        }
        @keyframes pulseBtn { 0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.7); } 70% { transform: scale(1.05); box-shadow: 0 0 0 20px rgba(255, 71, 87, 0); } 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 71, 87, 0); } }

        /* Story Card (3D Tilt) */
        .card-container {
            width: 90%; max-width: 420px; perspective: 1000px;
        }
        .polaroid {
            background: white; padding: 12px; border-radius: 15px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
            transform-style: preserve-3d; transition: transform 0.1s;
        }
        .img-box {
            width: 100%; background: #f8f8f8; border-radius: 10px; overflow: hidden;
            display: flex; justify-content: center; align-items: center;
            /* Allow image to dictate height, but cap it */
            max-height: 55vh; min-height: 300px;
        }
        .polaroid img {
            width: 100%; height: auto; object-fit: contain; display: block;
        }
        .caption-box {
            padding: 20px 10px; text-align: center; color: #444; font-size: 18px; font-weight: 600; line-height: 1.6; white-space: pre-line;
        }
        .btn-next {
            margin-top: 20px; background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white; border: none; padding: 12px 40px; border-radius: 50px; font-size: 20px;
            cursor: pointer; box-shadow: 0 8px 20px rgba(255, 71, 87, 0.5); font-family: 'Mali';
            transition: transform 0.2s;
        }
        .btn-next:active { transform: scale(0.9); }

        /* Ending */
        .end-box {
            background: rgba(255,255,255,0.95); padding: 40px; border-radius: 30px;
            text-align: center; max-width: 90%; box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            border: 2px solid white;
        }

        /* Mobile Adjust */
        @media (max-width: 600px) { .intro-title { font-size: 45px; } .polaroid { transform: none !important; } /* Disable 3D tilt on mobile for performance */ }
    </style>
</head>
<body>

    <div class="progress-container"><div class="progress-bar" id="p-bar"></div></div>
    
    <div class="music-disk" title="Music On"></div>

    <div class="bg-hearts" id="bg-hearts"></div>

    <div id="app">
        
        <div class="screen active" id="s-intro">
            <div class="intro-title">The Story of Us ‚ù§Ô∏è</div>
            <div style="font-size: 80px; margin-bottom: 20px; animation: bounce 2s infinite;">üìñ</div>
            <button class="btn-pulse" onclick="nextScreen('s-story')">Tap to Open</button>
        </div>

        <div class="screen hidden" id="s-story">
            <div class="card-container" id="tilt-card">
                <div class="polaroid">
                    <div class="img-box">
                        <img id="story-img" src="1.png" alt="Memory">
                    </div>
                    <div class="caption-box" id="story-text">...</div>
                </div>
            </div>
            <button class="btn-next" onclick="nextSlide()">Next ‚ù§Ô∏è</button>
        </div>

        <div class="screen hidden" id="s-end">
            <div class="end-box">
                <h1 style="font-family: 'Dancing Script'; font-size: 50px; color: #ff4757; margin: 0;">Happy Birthday! üéÇ</h1>
                <p id="final-msg" style="font-size: 18px; margin: 20px 0; line-height: 1.6;"></p>
                <button class="btn-pulse" style="font-size: 18px; padding: 10px 30px;" onclick="location.reload()">Replay ‚Ü∫</button>
            </div>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <script>
        // --- DATA ---
        const stories = [
            { img: "1.png", txt: "‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡πâ‡∏ô‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°? ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ô‡∏±‡πà‡∏á‡∏ä‡∏¥‡∏•‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô\n‡∏ó‡πà‡∏≤‡∏°‡∏Å‡∏•‡∏≤‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥ ‡πÅ‡∏Ñ‡πà‡∏°‡∏µ‡πÄ‡∏ò‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡πÜ\n‡πÇ‡∏•‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡πâ‡∏≤‡∏Å‡πá‡∏™‡∏î‡πÉ‡∏™‡∏Ç‡∏∂‡πâ‡∏ô‡∏ó‡∏±‡∏ô‡∏ï‡∏≤‡πÄ‡∏•‡∏¢ ‚òÄÔ∏è" },
            { img: "2.png", txt: "‡∏ñ‡∏∂‡∏á‡∏ö‡∏≤‡∏á‡∏ó‡∏µ‡∏à‡∏∞‡∏ä‡∏≠‡∏ö‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏î‡∏∏‡πÉ‡∏™‡πà‡πÄ‡∏ß‡∏•‡∏≤‡∏´‡∏¥‡∏ß ü§£\n‡πÅ‡∏ï‡πà‡∏£‡∏π‡πâ‡πÑ‡∏´‡∏°‡∏ß‡πà‡∏≤... ‡∏¢‡∏¥‡πà‡∏á‡∏°‡∏≠‡∏á ‡πÄ‡∏Ñ‡πâ‡∏≤‡∏Å‡πá‡∏¢‡∏¥‡πà‡∏á‡∏´‡∏•‡∏á‡∏£‡∏±‡∏Å\n‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡∏°‡∏∑‡πâ‡∏≠‡∏ô‡∏∞ üç≤" },
            { img: "3.png", txt: "‡πÉ‡∏ô‡∏Ñ‡∏∑‡∏ô‡∏ß‡∏±‡∏ô‡∏•‡∏≠‡∏¢‡∏Å‡∏£‡∏∞‡∏ó‡∏á...\n‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏´‡∏ô‡∏π‡∏≠‡∏ò‡∏¥‡∏©‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏û‡∏£‡∏≠‡∏∞‡πÑ‡∏£‡∏ô‡∏∞\n‡πÅ‡∏ï‡πà‡∏û‡∏£‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏≠ '‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏ï‡∏•‡∏≠‡∏î‡πÑ‡∏õ' üåï" },
            { img: "4.png", txt: "‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏ô‡∏≤‡∏¢‡∏ô‡∏≠‡∏ô‡∏™‡∏ö‡∏≤‡∏¢‡πÉ‡∏à‡∏û‡∏∏‡∏á‡∏û‡∏•‡∏∏‡πâ‡∏¢‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ üê±\n‡∏Å‡πá‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡∏π‡πÄ‡∏•‡∏¢\n‡∏°‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠ Safe Zone ‡∏ó‡∏µ‡πà‡∏≠‡∏ö‡∏≠‡∏∏‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏ö‡∏≤‡∏¢‡πÉ‡∏à‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î" },
            { img: "5.png", txt: "‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≠‡∏¢‡∏¢‡∏¥‡πâ‡∏° ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç\n‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≠‡∏¢‡∏î‡∏π‡πÅ‡∏•‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏±‡∏ô‡πÄ‡∏™‡∏°‡∏≠‡∏°‡∏≤‡∏ô‡∏∞\n(‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á‡∏î‡∏π‡πÅ‡∏•‡πÄ‡∏à‡πâ‡∏≤‡πÅ‡∏°‡∏ß‡∏≠‡πâ‡∏ß‡∏ô‡∏û‡∏ß‡∏Å‡∏ô‡∏µ‡πâ‡∏î‡πâ‡∏ß‡∏¢) üíï" },
            { img: "6.png", txt: "‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ô‡∏µ‡πâ...\n‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏µ‡∏ô‡∏µ‡πâ ‡πÄ‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏´‡∏ô‡∏π‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏°‡∏≤‡∏Å‡πÜ\n‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏°‡πà‡πÅ‡∏°‡∏ß‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡πâ‡∏≤‡πÑ‡∏õ‡∏ô‡∏≤‡∏ô‡πÜ ‡∏ô‡∏∞!" }
        ];
        const endMsg = "‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏ô‡∏∞ '‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏Å' üéÇ\n\n‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏°‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏Ñ‡πâ‡∏≤‡∏£‡∏±‡∏Å‡∏ô‡∏∞\n‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡∏à‡∏∞‡∏î‡∏π‡πÅ‡∏•‡∏´‡∏ô‡∏π\n‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏î‡∏µ‡πÜ ‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô\n\n‡∏£‡∏±‡∏Å‡∏´‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡πÇ‡∏•‡∏Å‡πÄ‡∏•‡∏¢! ‚ù§Ô∏è‚ú®";

        let curIdx = 0;

        // --- EFFECTS SYSTEM ---
        
        // 1. Floating Hearts BG
        const bgContainer = document.getElementById('bg-hearts');
        function spawnHeart() {
            const h = document.createElement('div');
            h.innerText = Math.random() > 0.5 ? '‚ù§Ô∏è' : 'üíñ';
            h.className = 'floating-heart';
            h.style.left = Math.random() * 100 + '%';
            h.style.animationDuration = (Math.random() * 5 + 10) + 's';
            h.style.fontSize = (Math.random() * 20 + 10) + 'px';
            bgContainer.appendChild(h);
            setTimeout(() => h.remove(), 15000);
        }
        setInterval(spawnHeart, 800);

        // 2. Cursor Trail & Click Boom
        document.addEventListener('mousemove', (e) => {
            if(Math.random() > 0.8) createTrail(e.clientX, e.clientY);
        });
        document.addEventListener('touchmove', (e) => {
            const touch = e.touches[0];
            if(Math.random() > 0.8) createTrail(touch.clientX, touch.clientY);
        });
        document.addEventListener('click', (e) => {
            createBurst(e.clientX, e.clientY);
        });

        function createTrail(x, y) {
            const t = document.createElement('div');
            t.className = 'trail';
            t.style.left = x + 'px';
            t.style.top = y + 'px';
            t.style.background = `hsl(${Math.random()*360}, 70%, 60%)`;
            document.body.appendChild(t);
            setTimeout(() => t.remove(), 1000);
        }

        function createBurst(x, y) {
            confetti({
                particleCount: 30, spread: 60, origin: { x: x/window.innerWidth, y: y/window.innerHeight },
                colors: ['#ff4757', '#ffffff', '#ffd700'], disableForReducedMotion: true, zIndex: 9999
            });
        }

        // 3. 3D Tilt Effect (PC Only)
        const card = document.querySelector('.polaroid');
        const container = document.getElementById('app');
        container.addEventListener('mousemove', (e) => {
            if(window.innerWidth < 768) return; // No tilt on mobile
            const xAxis = (window.innerWidth / 2 - e.pageX) / 25;
            const yAxis = (window.innerHeight / 2 - e.pageY) / 25;
            card.style.transform = `rotateY(${xAxis}deg) rotateX(${yAxis}deg)`;
        });

        // --- LOGIC ---

        function updateProgress() {
            const percent = ((curIdx + 1) / stories.length) * 100;
            document.getElementById('p-bar').style.width = percent + '%';
        }

        function loadSlide() {
            const img = document.getElementById('story-img');
            const txt = document.getElementById('story-text');
            
            // Effect
            card.style.opacity = '0';
            card.style.transform = 'scale(0.8) rotate(-5deg)'; // Reset tilt
            
            setTimeout(() => {
                img.src = stories[curIdx].img;
                txt.innerText = stories[curIdx].txt;
                card.style.opacity = '1';
                card.style.transform = 'scale(1) rotate(0deg)';
                updateProgress();
            }, 300);
        }

        function nextScreen(id) {
            document.querySelectorAll('.screen').forEach(s => {
                s.classList.remove('active');
                s.classList.add('hidden');
            });
            document.getElementById(id).classList.remove('hidden');
            document.getElementById(id).classList.add('active');
            
            if(id === 's-story') loadSlide();
        }

        function nextSlide() {
            if(curIdx < stories.length - 1) {
                curIdx++;
                loadSlide();
            } else {
                nextScreen('s-end');
                startTyping(endMsg);
                fireFireworks();
            }
        }

        function startTyping(txt) {
            const el = document.getElementById('final-msg');
            el.innerHTML = "";
            let i = 0;
            function type() {
                if (i < txt.length) {
                    el.innerHTML += txt.charAt(i);
                    i++;
                    setTimeout(type, 50);
                }
            }
            setTimeout(type, 500);
        }

        function fireFireworks() {
            const duration = 5000;
            const end = Date.now() + duration;
            (function frame() {
                confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0, y: 0.6 } });
                confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1, y: 0.6 } });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());
        }
        
        // Bounce animation css
        const style = document.createElement('style');
        style.innerHTML = `
            @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        `;
        document.head.appendChild(style);

    </script>
</body>
</html>
